# Tcl インタープリターと評価のルール

この章では Tcl インタープリター（Tcl interpreter）の働きについて学びます。
公式マニュアルの [Tcl の章](https://www.tcl.tk/man/tcl8.5/TclCmd/Tcl.htm)
に相当する内容です。


Tcl インタープリターとは Tcl 言語で書かれたプログラムの構造の解釈と実行を司るプログラムです。
その実体は C言語で書かれたライブラリー [libtcl](https://www.tcl-lang.org/man/tcl8.5/TclLib/Eval.htm) です。
Tcl の言語エンジンと呼んでも良いでしょう。`tclsh` や `wish` も
Tcl インタープリターをライブラリーとして組み込んだシェルです。

Tcl で書かれたプログラムのことを Tcl スクリプトと呼びます。

Tcl インタープリターは、与えられたスクリプトの構造を
Tcl スクリプトの書き方のルール（構文論：syntax）に従って読み解き、
それを Tcl スクリプトの実行の仕方に関するルール（意味論：semantics）に基づいて実行します。
Tcl では、この２つの過程を合わせて **評価** （evaluation）と呼びます。


Tcl は見かけ上、他のシェルやプログラミング言語に似せた書き方をする所もありますが、
その正確な意味を理解しないままでスクリプトを書くと、勘違いによるバグを引き起こすこともあります。
ですので、Tcl インタープリターの挙動を正しく理解することは非常に重要です。


## 構文を要約すると、Tcl のスクリプトは：

- [`#` コメント](comment.md)か、

- [コマンド](tcl_command.md)の集まりです。  
→ それぞれのコマンドは：

  - （適切に quote された）[word の集まりへと分割](word_breaking_and_quoting.md)されます。  
  → それぞれのword の中は：

    - 以下のいずれかの[置換](./substitution.md)か、

      - コマンド `[]` 置換
      - 変数 `$` 置換
      - バックスラッシュ `\` 置換

    - <small>（word 分割と置換に関わる文字を含まない）</small>只の文字列です。

  - word の先頭が `{*}` 始まっている場合は、[引数展開](arg_expansion.md)が適用されます。
