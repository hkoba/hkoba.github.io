# なぜ今さらTcl?

私が Tcl をお勧めする理由は、Tcl がシェル系の言語の中では（書き方は多少冗長ですが）比較的堅牢なプログラムを書きやすいから、です。付録に [bashとの比較](./comparison_with_bash.md) を挙げました。

## もう少し詳しく

Tcl がメジャーな言語でないことは、現代の Tcl プログラマーにとって大前提です。
2020-06 の [TIOBE index](https://www.tiobe.com/tiobe-index/) における
言語の人気トップ5 は C, Java, Python, C++, C# だそうです。JavaScript が 7位。
[別の記事](https://www.cleveroad.com/blog/programming-languages-ranking)での
トップ5 は Python, Java, JavaScript, C#, PHP.

では、一つのお仕事を成し遂げるにあたり、使う言語は一つで良いのでしょうか？
例えば Python や Java, C++ だけで一つの仕事に関わるプログラムを書き上げるのか？というと、
一番外側をシェル系の言語で書くものも見かけます。
例えば linux の firefox や google-chrome, libreoffice の本体は
ネィティブバイナリーですが、それらの起動コマンドが `/bin/sh` 
で書かれていることはよく知られています。なぜこうするのでしょうか？

勿論、その最も大きな理由は、Linux の Distrubution 間の違いを吸収するためでしょう。
`/bin/sh` は POSIX 的に必ず使える処理系だからです。
ただ、本当にそれだけが理由でしょうか？ 
クロスプラットフォームな、より優れた言語である python 等の言語を
使わないのは、何故でしょうか？

私の解釈では、そういう仕事はシェル系の言語のほうが楽だから、
という理由もあるのではないかと思います。

複雑な仕事を担うソフトウェアシステムは、他のソフトウェア・要素との
やり取りのために、大量の文字列定数を扱う必要があります。それらは
すなわち、ファイル名やディレクトリ名、データベースへの接続文字列、
クラウドサービスのプロジェクト名やサービスアカウント名、APIキーなどです。

Python や Java などの普通の言語では、文字列定数は全て `"..."` のように
引用符で表記する必要があります。書くことが面倒という面もありますし、
ハードコーディングを避けたい、オプションとしてプログラムの外から
渡せるようにしたい、という欲求もあります。

それをどこから渡すか。一つには設定ファイルを使う方法があります。
ですが、yaml や ini などの設定ファイルは if や変数、ループは使えません。
プログラムが必要とする文字列定数が一定量を超すと、設定ファイル方式には限界が来ます。
そこでシェル系の言語が導入される、という事情があるように思います。

シェル系の場合、そのシェルのメタ文字でない文字列は、
引用符なしでそのまま表記することが可能です。
また、シェル系の言語はファイル名の操作と、外部プロセスのパイプラインを手短に書ける、
という強みもあります。

そういったシェル系言語として現代で最も使われるのは bash ですが、
初心者が bash で堅牢なプログラムを書くのは決して簡単なことではないように思います。
それに対し Tcl は例外処理の仕組みが整っているので、比較的初心者に優しい言語です。
Unit Test の仕組みも標準添付です。

それが、私が今さら Tcl をお勧めする理由です。

